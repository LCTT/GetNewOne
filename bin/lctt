#!/bin/bash

set -e

export LCTT_DIR="$(pwd)"
cd "$(dirname "$(readlink -f "$0")")"/..

usage() {
  echo "LCTT Helper"
  echo "Usage: $0 SUBCOMMAND [OPTION...]"
  echo
  echo "Subcommands:"
  echo "  list      List LCTT articles"
  echo "  claim     Claim an article"
  echo "  submit    Submit an claimed article"
  echo "  help      Print usage for subcommands"
}

[ $# -lt 1 ] && {
  usage
  exit 1
}

SUBCOMMAND="$1"
COMMAND_SCRIPT="./lib/commands/${SUBCOMMAND}"

[ -x "$COMMAND_SCRIPT" ] && "$COMMAND_SCRIPT" ${@:2} || {
  ./lib/error "Unknown subcommand $SUBCOMMAND"
  usage
  exit 1
}
